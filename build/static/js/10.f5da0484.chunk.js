(this.webpackJsonpgateway=this.webpackJsonpgateway||[]).push([[10],{1158:function(e,t,i){"use strict";i.r(t);var n=i(15),l=i(10),o=i(9),a=i(6),u=i.n(a),s=i(44),d=i(408),r=i(152),c=i(45),v=i(68),f=i(3),b=i(87),j=i(2);t.default=function(){var e,t,i,a,g,O,m,p,h,D=Object(s.j)().gate,G=Object(c.b)(),k=G.userInfo,I=(G.loggingIn,Object(d.a)(Object(r.d)(b.d),{variables:{id:D}})),S=I.data,w=I.loading,y=I.error,q=Object(d.a)(Object(r.d)(b.l),{variables:{filter:Object(o.a)({},S&&(null===S||void 0===S?void 0:S.getGate.admins.length)>0&&{or:null===S||void 0===S?void 0:S.getGate.admins.map((function(e){return{id:{eq:e}}}))})}}),x=q.data,E=(q.loading,q.error,Object(d.a)(Object(r.d)(b.k),{variables:{filter:Object(o.a)({},S&&(null===S||void 0===S?void 0:S.getGate.preRequisites.completedGates.length)>0&&{or:null===S||void 0===S?void 0:S.getGate.preRequisites.completedGates.map((function(e){return{id:{eq:e}}}))})}})),R=E.data,J=(E.loading,E.error,Object(f.useState)((null===S||void 0===S?void 0:S.getGate)||{})),L=Object(l.a)(J,2),U=L[0],A=L[1],z=Object(f.useState)(!1),B=Object(l.a)(z,2),C=B[0],F=B[1],H=Object(f.useState)(null===k||void 0===k||null===(e=k.gates)||void 0===e||null===(t=e.items)||void 0===t?void 0:t.map((function(e){return e.gateID===D&&(null===e||void 0===e?void 0:e.keysDone)||0}))),K=Object(l.a)(H,2),M=K[0],N=K[1],P=Object(f.useState)((null===k||void 0===k||null===(i=k.gates)||void 0===i||null===(a=i.items)||void 0===a?void 0:a.filter((function(e){return e.gateID!==D})).length)>0?null===k||void 0===k||null===(g=k.gates)||void 0===g||null===(O=g.items)||void 0===O||null===(m=O.filter((function(e){return e.gateID!==D}))[0].tasks)||void 0===m||null===(p=m.items)||void 0===p?void 0:p.map((function(e){return e.userID===k.id&&e})):[]),Q=Object(l.a)(P,2),T=Q[0],V=Q[1],W=Object(f.useState)(null===x||void 0===x?void 0:x.listUsers.items),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$=Object(f.useState)(null===R||void 0===R?void 0:R.listGates.items),_=Object(l.a)($,2),ee=_[0],te=_[1];return Object(f.useEffect)((function(){var e=function(){var e=Object(n.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!S||w||y||A(S.getGate);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[D,w,S]),Object(f.useEffect)((function(){F(!!U&&!w&&null!==k&&null!==(null===k||void 0===k?void 0:k.isAdmin)&&!(null===Y||void 0===Y||!Y.length))}),[U,w,k,Y]),Object(f.useEffect)((function(){var e,t,i,n,l,o,a,u,s;N((null===k||void 0===k||null===(e=k.gates)||void 0===e||null===(t=e.items)||void 0===t||null===(i=t.filter((function(e){return e.gateID===D}))[0])||void 0===i?void 0:i.keysDone)||0),V((null===k||void 0===k||null===(n=k.gates)||void 0===n||null===(l=n.items)||void 0===l?void 0:l.filter((function(e){return e.gateID===D&&e})).length)>0?null===k||void 0===k||null===(o=k.gates)||void 0===o||null===(a=o.items)||void 0===a||null===(u=a.filter((function(e){return e.gateID===D&&e}))[0].tasks)||void 0===u||null===(s=u.items)||void 0===s?void 0:s.filter((function(e){return e.userID===k.id})):[])}),[D,k]),Object(f.useEffect)((function(){x&&Z(null===x||void 0===x?void 0:x.listUsers.items)}),[D,x]),Object(f.useEffect)((function(){R&&te(null===R||void 0===R?void 0:R.listGates.items)}),[D,R]),y?(console.error(y),Object(j.jsx)(s.a,{to:"/404"})):Object(j.jsx)(v.a,{children:Object(j.jsx)(s.b,{context:{gateData:Object(o.a)(Object(o.a)({},U),{},{holders:(null===S||void 0===S||null===(h=S.getGate)||void 0===h?void 0:h.holders)||0,keysDone:M,taskStatus:T,adminList:Y||[],preRequisitesList:ee||[]}),setGateData:A,loaded:C,loading:w}})})}}}]);
//# sourceMappingURL=10.f5da0484.chunk.js.map